<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Claw Staffer — Dashboard</title>
  <link rel="stylesheet" href="/assets/style.css?v=16">
  <!-- Firebase JS SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAw0aAqx3DgHZAkpsB9EZP2TqaJGVUGqDk",
      authDomain: "auto-staff-ai.firebaseapp.com",
      projectId: "auto-staff-ai",
      storageBucket: "auto-staff-ai.firebasestorage.app",
      messagingSenderId: "584029050721",
      appId: "1:584029050721:web:8eb59a46638ceb7e0a1720"
    };
    firebase.initializeApp(firebaseConfig);
  </script>
</head>
<body>
  <div id="app">
    <!-- Login screen -->
    <div id="login-screen" class="screen">
      <div class="card center-card">
        <div style="text-align:center;margin-bottom:1rem">
          <img src="/assets/logo-512.png" alt="Claw Staffer" style="width:80px;height:80px;border-radius:12px">
        </div>
        <h1>Claw Staffer</h1>
        <p class="subtitle">AI-Powered Bot Management Platform</p>

        <!-- Firebase Auth Section -->
        <div id="firebase-auth-section" style="display:none">
          <!-- Google Sign-In -->
          <button id="google-signin-btn" class="btn btn-google" type="button">
            <svg width="18" height="18" viewBox="0 0 24 24" style="margin-right:8px;vertical-align:middle"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
            Sign in with Google
          </button>

          <button id="github-signin-btn" class="btn btn-github" type="button">
            <svg width="18" height="18" viewBox="0 0 24 24" style="margin-right:8px;vertical-align:middle"><path fill="#fff" d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/></svg>
            Sign in with GitHub
          </button>

          <div class="auth-divider"><span>or sign in with email</span></div>

          <!-- Email/Password Auth -->
          <form id="firebase-email-form">
            <div class="field">
              <label for="fb-email">Email</label>
              <input type="email" id="fb-email" placeholder="you@example.com" required>
            </div>
            <div class="field">
              <label for="fb-password">Password</label>
              <input type="password" id="fb-password" placeholder="Password (min 6 chars)" required>
            </div>
            <div class="auth-btn-row">
              <button type="submit" class="btn btn-primary" style="flex:1">Sign In</button>
              <button type="button" id="fb-register-btn" class="btn" style="flex:1">Create Account</button>
            </div>
            <p id="firebase-error" class="error" style="display:none"></p>
          </form>

          <div class="auth-divider"><span>admin login</span></div>
        </div>

        <!-- Local Admin Login (always available) -->
        <form id="login-form">
          <div class="field">
            <label for="login-username">Username</label>
            <input type="text" id="login-username" placeholder="admin" required>
          </div>
          <div class="field">
            <label for="login-password">Password</label>
            <input type="password" id="login-password" placeholder="Password" required>
          </div>
          <button type="submit" class="btn btn-primary" style="width:100%">Admin Login</button>
          <p id="login-error" class="error" style="display:none"></p>
        </form>
      </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard-screen" class="screen" style="display:none">
      <header>
        <div style="display:flex;align-items:center;gap:0.75rem">
          <img src="/assets/logo-512.png" alt="Claw Staffer" style="width:40px;height:40px;border-radius:8px">
          <h1 style="margin:0">Claw Staffer</h1>
        </div>
        <nav>
          <button class="nav-btn active" data-tab="dashboard"><span class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
          </span>Dashboard</button>
          <button class="nav-btn" data-tab="bots"><span class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect x="2" y="8" width="20" height="12" rx="2"/><path d="M6 12h.01"/><path d="M18 12h.01"/><path d="M9 16h6"/></svg>
          </span>Bots</button>
          <button class="nav-btn" data-tab="agents"><span class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a5 5 0 0 1 5 5c0 2.76-2.24 5-5 5s-5-2.24-5-5a5 5 0 0 1 5-5z"/><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="0.5" fill="currentColor"/></svg>
          </span>Agents</button>
          <button class="nav-btn" data-tab="chat"><span class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
          </span>Bot Chat</button>
          <button class="nav-btn" data-tab="agent-chat"><span class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
          </span>Agent Chat</button>
          <button class="nav-btn" data-tab="agent-projects"><span class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
          </span>Agent Projects</button>
          <button class="nav-btn" data-tab="integrations"><span class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 1v4"/><path d="M12 19v4"/><path d="M4.22 4.22l2.83 2.83"/><path d="M16.95 16.95l2.83 2.83"/><path d="M1 12h4"/><path d="M19 12h4"/><path d="M4.22 19.78l2.83-2.83"/><path d="M16.95 7.05l2.83-2.83"/></svg>
          </span>Integrations</button>
          <button class="nav-btn" data-tab="settings"><span class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
          </span>Settings</button>
        </nav>
        <div class="header-right">
          <span id="user-info"></span>
          <button id="logout-btn" class="btn btn-sm">Logout</button>
        </div>
      </header>

      <!-- Dashboard Tab -->
      <div id="tab-dashboard" class="tab-content">
        <h2>Setup Status</h2>
        <div id="setup-status" class="status-grid"></div>
        <h2>Quick Stats</h2>
        <div id="quick-stats" class="stats-grid"></div>
      </div>

      <!-- Bots Tab -->
      <div id="tab-bots" class="tab-content" style="display:none">
        <div class="tab-header">
          <h2>Telegram Bots</h2>
          <button id="add-bot-btn" class="btn btn-primary">+ Add Bot</button>
        </div>
        <div id="bots-list"></div>

        <!-- Add Telegram Bot Modal -->
        <div id="add-bot-modal" class="modal" style="display:none">
          <div class="modal-content tg-connect-modal">
            <button type="button" class="modal-close-x" onclick="closeModal('add-bot-modal')">&times;</button>
            <div class="tg-modal-header">
              <svg class="tg-icon" width="36" height="36" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="11" fill="#2AABEE"/><path d="M6.5 12.3l1.8 1.7.1.1 1.2 3.7c.1.2.3.2.4.1l1.7-1.4a.4.4 0 0 1 .5 0l3 2.2c.3.2.5.1.6-.2l2.2-10.4c.1-.3-.1-.5-.4-.4L6.4 11.6c-.3.1-.3.4.1.6z" fill="#fff"/></svg>
              <h3>Connect Telegram</h3>
            </div>

            <div class="tg-steps">
              <h4>How to get your bot token?</h4>
              <ol>
                <li>Open Telegram and go to <a href="https://t.me/BotFather" target="_blank">@BotFather</a></li>
                <li>Start a chat and type <code>/newbot</code></li>
                <li>Follow the prompts to name your bot and choose a username</li>
                <li>BotFather will send you a message with your bot token<br>
                    <span class="tg-step-note">Copy the entire token (it looks like a long string of numbers and letters)</span></li>
                <li>Paste the token in the field below and click Connect</li>
              </ol>
            </div>

            <form id="add-bot-form">
              <div class="field">
                <label for="bot-token">Enter bot token</label>
                <input type="text" id="bot-token" placeholder="1234567890:AAGxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" required>
                <span id="token-status"></span>
              </div>
              <div class="field">
                <label for="bot-name">Bot display name</label>
                <input type="text" id="bot-name" placeholder="My Bot" required>
              </div>
              <div class="field">
                <label for="bot-agent">Agent</label>
                <select id="bot-agent"></select>
              </div>
              <button type="submit" class="btn btn-primary tg-connect-btn">Connect</button>
              <button type="button" id="validate-token-btn" style="display:none"></button>
            </form>
          </div>
        </div>

        <hr style="border-color:var(--border);margin:2rem 0">

        <!-- Web Bots Section -->
        <div class="tab-header">
          <h2>Website Bots</h2>
          <button id="add-web-bot-btn" class="btn btn-primary">+ Add Web Bot</button>
        </div>
        <p class="help-text">
          Create chat bots that can be embedded on any website. Copy the embed code and paste it into your site's HTML.
        </p>
        <div id="web-bots-list"></div>

        <!-- Add Web Bot Modal -->
        <div id="add-web-bot-modal" class="modal" style="display:none">
          <div class="modal-content">
            <h3>Create Website Bot</h3>
            <form id="add-web-bot-form">
              <div class="field">
                <label for="web-bot-name">Bot Name</label>
                <input type="text" id="web-bot-name" placeholder="Customer Support Bot" required>
              </div>
              <div class="field">
                <label for="web-bot-agent">Agent</label>
                <select id="web-bot-agent"></select>
              </div>
              <div class="field">
                <label for="web-bot-origins">Allowed Origins</label>
                <input type="text" id="web-bot-origins" placeholder="* (all) or https://example.com" value="*">
                <p class="help-text" style="margin:0.3rem 0 0">Comma-separated list of domains allowed to use this bot. Use * for all.</p>
              </div>
              <div class="field">
                <label for="web-bot-color">Widget Color</label>
                <input type="color" id="web-bot-color" value="#6C5CE7">
              </div>
              <div class="field">
                <label for="web-bot-greeting">Greeting Message</label>
                <input type="text" id="web-bot-greeting" placeholder="Hi! How can I help you today?" value="Hi! How can I help you today?">
              </div>
              <div class="field">
                <label for="web-bot-position">Widget Position</label>
                <select id="web-bot-position">
                  <option value="bottom-right">Bottom Right</option>
                  <option value="bottom-left">Bottom Left</option>
                </select>
              </div>
              <div class="modal-actions">
                <button type="button" class="btn" onclick="closeModal('add-web-bot-modal')">Cancel</button>
                <button type="submit" class="btn btn-primary">Create Web Bot</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Embed Code Modal -->
        <div id="embed-code-modal" class="modal" style="display:none">
          <div class="modal-content">
            <h3>Embed Code</h3>
            <p class="help-text">Copy and paste this code into your website's HTML, just before the closing <code>&lt;/body&gt;</code> tag.</p>
            <div class="field">
              <textarea id="embed-code-text" rows="4" readonly style="font-family:monospace;font-size:0.85rem;width:100%;background:var(--bg);color:var(--text);border:1px solid var(--border);border-radius:6px;padding:0.8rem;resize:none"></textarea>
            </div>
            <div class="modal-actions">
              <button type="button" class="btn" onclick="closeModal('embed-code-modal')">Close</button>
              <button type="button" id="copy-embed-btn" class="btn btn-primary">Copy Code</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Agents Tab -->
      <div id="tab-agents" class="tab-content" style="display:none">
        <div class="tab-header">
          <h2>AI Agents</h2>
          <button id="add-agent-btn" class="btn btn-primary">+ Create Agent</button>
        </div>
        <div id="agents-list"></div>

        <!-- Add Agent Modal -->
        <div id="add-agent-modal" class="modal" style="display:none">
          <div class="modal-content">
            <h3>Create AI Agent</h3>
            <form id="add-agent-form">
              <div class="field">
                <label for="agent-name">Name</label>
                <input type="text" id="agent-name" placeholder="My Agent" required>
              </div>
              <div class="field">
                <label for="agent-desc">Description</label>
                <input type="text" id="agent-desc" placeholder="What does this agent do?">
              </div>
              <div class="field">
                <label for="agent-provider">Provider</label>
                <select id="agent-provider">
                  <option value="openai">OpenAI</option>
                  <option value="anthropic">Anthropic</option>
                  <option value="google">Google</option>
                  <option value="grok">Grok (xAI)</option>
                </select>
              </div>
              <div class="field">
                <label for="agent-model">Model</label>
                <select id="agent-model"></select>
              </div>
              <div class="field">
                <label for="agent-prompt-preset">System Prompt Preset</label>
                <select id="agent-prompt-preset">
                  <option value="custom">Custom (write your own)</option>
                </select>
              </div>
              <div class="field">
                <label for="agent-prompt">System Prompt</label>
                <textarea id="agent-prompt" rows="6" placeholder="You are a helpful assistant..."></textarea>
              </div>
              <div class="field">
                <label for="agent-temp">Temperature (0-1)</label>
                <input type="number" id="agent-temp" value="0.7" min="0" max="2" step="0.1">
              </div>
              <div class="modal-actions">
                <button type="button" class="btn" onclick="closeModal('add-agent-modal')">Cancel</button>
                <button type="submit" class="btn btn-primary">Create Agent</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Chat Test Tab -->
      <div id="tab-chat" class="tab-content" style="display:none">
        <div class="tab-header">
          <h2>Chat Test</h2>
          <select id="chat-bot-select"></select>
        </div>
        <div id="chat-messages" class="chat-box"></div>
        <form id="chat-form" class="chat-input">
          <input type="text" id="chat-input" placeholder="Type a message..." autocomplete="off">
          <button type="submit" class="btn btn-primary">Send</button>
        </form>
      </div>

      <!-- Agent Chat Tab -->
      <div id="tab-agent-chat" class="tab-content" style="display:none">
        <div class="tab-header">
          <h2>Agent Chat</h2>
          <select id="agent-chat-select"></select>
          <button id="agent-chat-clear" class="btn btn-sm">Clear</button>
        </div>
        <div id="agent-chat-info" class="agent-chat-info"></div>
        <div id="agent-chat-messages" class="chat-box"></div>
        <form id="agent-chat-form" class="chat-input">
          <input type="text" id="agent-chat-input" placeholder="Type a message to the agent..." autocomplete="off">
          <button type="submit" class="btn btn-primary">Send</button>
        </form>
      </div>

      <!-- Agent Projects Tab -->
      <div id="tab-agent-projects" class="tab-content" style="display:none">
        <!-- Projects List View -->
        <div id="projects-list-view">
          <div class="tab-header">
            <h2>Agent Projects</h2>
            <button id="new-project-btn" class="btn btn-primary">+ Create Project</button>
          </div>
          <p class="help-text">Create projects and collaborate with your AI agents through chat. Address agents by name (e.g., @CodingAssistant) to assign tasks. Click an agent in the sidebar to chat individually.</p>

          <!-- Filter bar -->
          <div style="display:flex;gap:0.5rem;margin-bottom:1rem;align-items:center">
            <label style="font-weight:600;font-size:0.85rem">Filter:</label>
            <select id="project-filter-status" style="padding:0.3rem 0.5rem;border-radius:6px;border:1px solid var(--border);background:var(--bg);color:var(--text);font-size:0.85rem">
              <option value="">All</option>
              <option value="active">Active</option>
              <option value="completed">Completed</option>
              <option value="archived">Archived</option>
            </select>
            <button class="btn btn-sm" id="project-refresh-btn">Refresh</button>
          </div>

          <!-- Projects grid -->
          <div id="projects-grid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem"></div>
        </div>

        <!-- Project Chat View (hidden by default) -->
        <div id="project-chat-view" style="display:none;height:calc(100vh - 140px)">
          <div style="display:flex;height:100%;gap:0">
            <!-- Agent Sidebar -->
            <div id="project-agent-sidebar" style="width:220px;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;flex-shrink:0">
              <div style="padding:1rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center">
                <button id="project-back-btn" class="btn btn-sm" style="padding:0.25rem 0.5rem">← Back</button>
                <button id="project-settings-btn" class="btn btn-sm" title="Project Settings">⚙</button>
              </div>
              <div style="padding:0.75rem;border-bottom:1px solid var(--border)">
                <h4 id="project-title" style="margin:0;font-size:0.95rem;word-break:break-word"></h4>
                <span id="project-status-badge" style="font-size:0.75rem;padding:0.15rem 0.4rem;border-radius:4px;margin-top:0.35rem;display:inline-block"></span>
              </div>
              <div style="padding:0.5rem;border-bottom:1px solid var(--border)">
                <div style="font-size:0.75rem;color:var(--text-dim);margin-bottom:0.35rem;font-weight:600">PROJECT AGENTS</div>
              </div>
              <div id="project-agents-list" style="flex:1;overflow-y:auto;padding:0.5rem"></div>
              <div style="padding:0.5rem;border-top:1px solid var(--border)">
                <button id="add-agent-to-project-btn" class="btn btn-sm" style="width:100%">+ Add Agent</button>
              </div>
            </div>

            <!-- Main Chat Area -->
            <div style="flex:1;display:flex;flex-direction:column;min-width:0">
              <div id="project-chat-header" style="padding:0.75rem 1rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center">
                <div>
                  <span id="project-chat-mode" style="font-weight:600">Project Chat</span>
                  <span id="project-chat-agent-name" style="color:var(--accent);margin-left:0.5rem"></span>
                </div>
                <div style="display:flex;gap:0.5rem">
                  <button id="project-chat-all-btn" class="btn btn-sm btn-primary">All Agents</button>
                </div>
              </div>
              <div id="project-chat-messages" style="flex:1;overflow-y:auto;padding:1rem;display:flex;flex-direction:column;gap:0.75rem"></div>
              <form id="project-chat-form" style="padding:1rem;border-top:1px solid var(--border);display:flex;gap:0.5rem">
                <input type="text" id="project-chat-input" placeholder="Type a message... (use @AgentName to address specific agents)" autocomplete="off" style="flex:1">
                <button type="submit" class="btn btn-primary">Send</button>
              </form>
            </div>
          </div>
        </div>

        <!-- Add Agent to Project Modal -->
        <div id="add-agent-modal" class="modal" style="display:none">
          <div class="modal-content" style="max-width:400px">
            <h3>Add Agent to Project</h3>
            <div id="available-agents-list" style="max-height:300px;overflow-y:auto"></div>
            <div class="modal-actions">
              <button type="button" class="btn" onclick="closeModal('add-agent-modal')">Cancel</button>
            </div>
          </div>
        </div>

        <!-- Project Settings Modal -->
        <div id="project-settings-modal" class="modal" style="display:none">
          <div class="modal-content" style="max-width:500px">
            <h3>Project Settings</h3>
            <form id="project-settings-form">
              <input type="hidden" id="project-settings-id">
              <div class="field">
                <label for="project-settings-title">Project Name</label>
                <input type="text" id="project-settings-title" required>
              </div>
              <div class="field">
                <label for="project-settings-status">Status</label>
                <select id="project-settings-status">
                  <option value="active">Active</option>
                  <option value="completed">Completed</option>
                  <option value="archived">Archived</option>
                </select>
              </div>
              <div class="field">
                <label>Integrations Access</label>
                <div id="project-integrations-list" style="display:flex;flex-wrap:wrap;gap:0.4rem;margin-top:0.3rem">
                  <label class="chip-checkbox"><input type="checkbox" value="github"> GitHub</label>
                  <label class="chip-checkbox"><input type="checkbox" value="google_drive"> Google Drive</label>
                  <label class="chip-checkbox"><input type="checkbox" value="vercel"> Vercel</label>
                  <label class="chip-checkbox"><input type="checkbox" value="netlify"> Netlify</label>
                  <label class="chip-checkbox"><input type="checkbox" value="docker"> Docker</label>
                </div>
              </div>
              <div class="modal-actions">
                <button type="button" class="btn btn-danger" id="delete-project-btn">Delete Project</button>
                <button type="button" class="btn" onclick="closeModal('project-settings-modal')">Cancel</button>
                <button type="submit" class="btn btn-primary">Save</button>
              </div>
            </form>
          </div>
        </div>

        <!-- New Project Modal -->
        <div id="new-project-modal" class="modal" style="display:none">
          <div class="modal-content" style="max-width:500px">
            <h3>Create New Project</h3>
            <form id="new-project-form">
              <div class="field">
                <label for="new-project-title">Project Name</label>
                <input type="text" id="new-project-title" placeholder="e.g. Landing Page Redesign" required>
              </div>
              <div class="field">
                <label>Select Agents to Add</label>
                <div id="new-project-agents-list" style="display:flex;flex-wrap:wrap;gap:0.4rem;margin-top:0.3rem"></div>
              </div>
              <div class="field">
                <label>Integrations Access</label>
                <div id="new-project-integrations-list" style="display:flex;flex-wrap:wrap;gap:0.4rem;margin-top:0.3rem">
                  <label class="chip-checkbox"><input type="checkbox" value="github"> GitHub</label>
                  <label class="chip-checkbox"><input type="checkbox" value="google_drive"> Google Drive</label>
                  <label class="chip-checkbox"><input type="checkbox" value="vercel"> Vercel</label>
                  <label class="chip-checkbox"><input type="checkbox" value="netlify"> Netlify</label>
                  <label class="chip-checkbox"><input type="checkbox" value="docker"> Docker</label>
                </div>
              </div>
              <div class="modal-actions">
                <button type="button" class="btn" onclick="closeModal('new-project-modal')">Cancel</button>
                <button type="submit" class="btn btn-primary">Create Project</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Integrations Tab -->
      <div id="tab-integrations" class="tab-content" style="display:none">
        <h2>Integrations</h2>
        <p class="help-text" style="margin-bottom:1.2rem">Set up integrations to extend your agents' capabilities</p>

        <div class="integrations-grid">

          <!-- GitHub Tile -->
          <div class="int-tile" id="github-integration-card">
            <div class="int-tile-top">
              <div class="int-tile-icon">
                <svg width="28" height="28" viewBox="0 0 24 24"><path fill="currentColor" d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/></svg>
              </div>
              <div id="github-connect-actions">
                <button id="github-connect-btn" class="btn btn-sm int-tile-btn">Connect</button>
                <button id="github-disconnect-btn" class="btn btn-sm btn-danger" style="display:none">Disconnect</button>
              </div>
            </div>
            <h3 class="int-tile-name">GitHub</h3>
            <p class="int-tile-desc">Browse repos, read, create and edit files in your repositories</p>
            <p id="github-account-info" class="int-tile-status">Not connected</p>

            <!-- GitHub File Browser (expands card) -->
            <div id="github-browser" style="display:none;margin-top:1rem;border-top:1px solid var(--border);padding-top:1rem">
              <div style="margin-bottom:0.8rem">
                <label style="font-weight:600;font-size:0.85rem;display:block;margin-bottom:0.35rem">Repository:</label>
                <div style="display:flex;gap:0.5rem;align-items:center">
                  <select id="github-repo-select" style="flex:1;min-width:0"></select>
                  <button class="btn btn-sm" id="github-refresh-btn" style="flex-shrink:0">Refresh</button>
                </div>
              </div>
              <div id="github-path-bar" style="font-size:0.8rem;color:var(--text-dim);margin-bottom:0.5rem"></div>
              <div id="github-files-list" class="file-list"></div>
              <div id="github-file-viewer" style="display:none;margin-top:0.8rem">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem">
                  <strong id="github-file-name" style="font-size:0.85rem"></strong>
                  <button class="btn btn-sm" id="github-close-file">Close</button>
                </div>
                <textarea id="github-file-content" rows="15" style="width:100%;font-family:monospace;font-size:0.8rem;background:rgba(255,255,255,0.03);color:var(--text);border:1px solid var(--glass-border);border-radius:6px;padding:0.5rem;resize:vertical"></textarea>
                <div style="display:flex;gap:0.5rem;margin-top:0.5rem">
                  <button class="btn btn-sm btn-primary" id="github-save-file">Save Changes</button>
                  <button class="btn btn-sm btn-danger" id="github-delete-file">Delete File</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Google Drive Tile -->
          <div class="int-tile" id="gdrive-integration-card">
            <div class="int-tile-top">
              <div class="int-tile-icon">
                <svg width="28" height="28" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
              </div>
              <div id="gdrive-connect-actions">
                <button id="gdrive-connect-btn" class="btn btn-sm int-tile-btn">Connect</button>
                <button id="gdrive-disconnect-btn" class="btn btn-sm btn-danger" style="display:none">Disconnect</button>
              </div>
            </div>
            <h3 class="int-tile-name">Google Drive</h3>
            <p class="int-tile-desc">Browse, create, edit and manage files in your Google Drive</p>
            <p id="gdrive-account-info" class="int-tile-status">Not connected</p>

            <!-- Google Drive File Browser -->
            <div id="gdrive-browser" style="display:none;margin-top:1rem;border-top:1px solid var(--border);padding-top:1rem">
              <div style="display:flex;gap:0.5rem;align-items:center;margin-bottom:0.8rem">
                <button class="btn btn-sm" id="gdrive-refresh-btn">Refresh</button>
                <button class="btn btn-sm btn-primary" id="gdrive-new-file-btn">+ New File</button>
              </div>
              <div id="gdrive-folder-path" style="font-size:0.8rem;color:var(--text-dim);margin-bottom:0.5rem"></div>
              <div id="gdrive-files-list" class="file-list"></div>
              <div id="gdrive-file-viewer" style="display:none;margin-top:0.8rem">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem">
                  <strong id="gdrive-file-name" style="font-size:0.85rem"></strong>
                  <button class="btn btn-sm" id="gdrive-close-file">Close</button>
                </div>
                <textarea id="gdrive-file-content" rows="15" style="width:100%;font-family:monospace;font-size:0.8rem;background:rgba(255,255,255,0.03);color:var(--text);border:1px solid var(--glass-border);border-radius:6px;padding:0.5rem;resize:vertical"></textarea>
                <div style="display:flex;gap:0.5rem;margin-top:0.5rem">
                  <button class="btn btn-sm btn-primary" id="gdrive-save-file">Save Changes</button>
                  <button class="btn btn-sm btn-danger" id="gdrive-delete-file">Delete File</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Vercel Tile -->
          <div class="int-tile" id="vercel-integration-card">
            <div class="int-tile-top">
              <div class="int-tile-icon">
                <svg width="28" height="28" viewBox="0 0 24 24"><path fill="currentColor" d="M12 1L24 22H0L12 1z"/></svg>
              </div>
              <div id="vercel-connect-actions">
                <button id="vercel-connect-btn" class="btn btn-sm int-tile-btn">Connect</button>
                <button id="vercel-disconnect-btn" class="btn btn-sm btn-danger" style="display:none">Disconnect</button>
              </div>
            </div>
            <h3 class="int-tile-name">Vercel</h3>
            <p class="int-tile-desc">Deploy projects, monitor deployments and manage your Vercel apps</p>
            <p id="vercel-account-info" class="int-tile-status">Not connected</p>

            <div id="vercel-browser" style="display:none;margin-top:1rem;border-top:1px solid var(--border);padding-top:1rem">
              <div style="display:flex;gap:0.5rem;align-items:center;margin-bottom:0.8rem">
                <button class="btn btn-sm" id="vercel-refresh-btn">Refresh</button>
              </div>
              <div id="vercel-projects-list" class="file-list"></div>
              <div id="vercel-deploys-list" style="display:none;margin-top:0.8rem">
                <h4 id="vercel-deploys-title" style="font-size:0.85rem;margin-bottom:0.5rem"></h4>
                <div id="vercel-deploys-items" class="file-list"></div>
                <button class="btn btn-sm" id="vercel-back-projects" style="margin-top:0.5rem">&larr; Back to Projects</button>
              </div>
            </div>
          </div>

          <!-- Netlify Tile -->
          <div class="int-tile" id="netlify-integration-card">
            <div class="int-tile-top">
              <div class="int-tile-icon">
                <svg width="28" height="28" viewBox="0 0 24 24"><path fill="#00C7B7" d="M12 0L1.608 6v12L12 24l10.392-6V6L12 0zm-.448 17.634l-5.418-3.13v-1.2l5.418 3.13v1.2zm.896 0v-1.2l5.418-3.13v1.2l-5.418 3.13zM6.134 12l5.418-3.13v1.2l-5.418 3.13V12zm6.314-3.13L17.866 12v1.2l-5.418-3.13v-1.2z"/></svg>
              </div>
              <div id="netlify-connect-actions">
                <button id="netlify-connect-btn" class="btn btn-sm int-tile-btn">Connect</button>
                <button id="netlify-disconnect-btn" class="btn btn-sm btn-danger" style="display:none">Disconnect</button>
              </div>
            </div>
            <h3 class="int-tile-name">Netlify</h3>
            <p class="int-tile-desc">Deploy sites, manage builds and monitor your Netlify projects</p>
            <p id="netlify-account-info" class="int-tile-status">Not connected</p>

            <div id="netlify-browser" style="display:none;margin-top:1rem;border-top:1px solid var(--border);padding-top:1rem">
              <div style="display:flex;gap:0.5rem;align-items:center;margin-bottom:0.8rem">
                <button class="btn btn-sm" id="netlify-refresh-btn">Refresh</button>
              </div>
              <div id="netlify-sites-list" class="file-list"></div>
              <div id="netlify-deploys-list" style="display:none;margin-top:0.8rem">
                <h4 id="netlify-deploys-title" style="font-size:0.85rem;margin-bottom:0.5rem"></h4>
                <div id="netlify-deploys-items" class="file-list"></div>
                <button class="btn btn-sm" id="netlify-back-sites" style="margin-top:0.5rem">&larr; Back to Sites</button>
              </div>
            </div>
          </div>

          <!-- Docker Tile -->
          <div class="int-tile" id="docker-integration-card">
            <div class="int-tile-top">
              <div class="int-tile-icon int-tile-icon--docker">
                <svg width="28" height="28" viewBox="0 0 24 24"><path fill="#2496ED" d="M13.983 11.078h2.119a.186.186 0 0 0 .186-.185V9.006a.186.186 0 0 0-.186-.186h-2.119a.186.186 0 0 0-.186.186v1.887c0 .102.083.185.186.185zm-2.954 0h2.118a.186.186 0 0 0 .186-.185V9.006a.186.186 0 0 0-.186-.186h-2.118a.186.186 0 0 0-.186.186v1.887c0 .102.083.185.186.185zm-2.93 0h2.12a.186.186 0 0 0 .184-.185V9.006a.186.186 0 0 0-.185-.186h-2.12a.186.186 0 0 0-.184.186v1.887c0 .102.082.185.185.185zm-2.964 0h2.119a.186.186 0 0 0 .185-.185V9.006a.186.186 0 0 0-.185-.186H5.136a.186.186 0 0 0-.186.186v1.887c0 .102.084.185.186.185zm5.893-2.507h2.118a.186.186 0 0 0 .186-.186V6.699a.186.186 0 0 0-.186-.186h-2.118a.186.186 0 0 0-.186.186v1.886c0 .103.083.186.186.186zm-2.93 0h2.12a.186.186 0 0 0 .184-.186V6.699a.186.186 0 0 0-.185-.186h-2.12a.186.186 0 0 0-.184.186v1.886c0 .103.082.186.185.186zm-2.964 0h2.119a.186.186 0 0 0 .185-.186V6.699a.186.186 0 0 0-.185-.186H5.136a.186.186 0 0 0-.186.186v1.886c0 .103.084.186.186.186zm5.893-2.507h2.118a.186.186 0 0 0 .186-.186V4.19a.186.186 0 0 0-.186-.186h-2.118a.186.186 0 0 0-.186.186v1.887c0 .102.083.186.186.186zm-2.93 0h2.12a.186.186 0 0 0 .184-.186V4.19a.186.186 0 0 0-.185-.186h-2.12a.186.186 0 0 0-.184.186v1.887c0 .102.082.186.185.186z"/></svg>
              </div>
              <button class="btn btn-sm int-tile-btn" id="docker-ping-btn">Test</button>
            </div>
            <h3 class="int-tile-name">Docker</h3>
            <p class="int-tile-desc">List containers, start, stop, restart and view logs from Docker</p>
            <p id="docker-status-info" class="int-tile-status">Not configured</p>

            <div id="docker-browser" style="display:none;margin-top:1rem;border-top:1px solid var(--border);padding-top:1rem">
              <div style="display:flex;gap:0.5rem;align-items:center;margin-bottom:0.8rem">
                <button class="btn btn-sm" id="docker-refresh-btn">Refresh</button>
              </div>
              <div id="docker-containers-list" class="file-list"></div>
            </div>
          </div>

        </div><!-- /integrations-grid -->

        <!-- New Drive File Modal -->
        <div id="gdrive-new-file-modal" class="modal" style="display:none">
          <div class="modal-content">
            <h3>Create New File</h3>
            <form id="gdrive-new-file-form">
              <div class="field">
                <label for="gdrive-new-filename">File Name</label>
                <input type="text" id="gdrive-new-filename" placeholder="document.txt" required>
              </div>
              <div class="field">
                <label for="gdrive-new-content">Content</label>
                <textarea id="gdrive-new-content" rows="6" style="font-family:monospace;font-size:0.85rem" placeholder="Enter file content..."></textarea>
              </div>
              <div class="modal-actions">
                <button type="button" class="btn" onclick="closeModal('gdrive-new-file-modal')">Cancel</button>
                <button type="submit" class="btn btn-primary">Create File</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Settings Tab -->
      <div id="tab-settings" class="tab-content" style="display:none">
        <h2>AI Providers</h2>
        <p class="help-text" style="margin-bottom:1rem">
          Pick the AI providers you want to use. Click a provider to add your API key. You can add multiple providers.
        </p>

        <div class="provider-list">

          <!-- OpenAI -->
          <div class="provider-row" onclick="this.classList.toggle('expanded')">
            <div class="provider-row-main">
              <div class="provider-row-icon">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M22.28 9.37a5.86 5.86 0 0 0-.5-4.82 5.9 5.9 0 0 0-6.37-2.83A5.87 5.87 0 0 0 11 0a5.9 5.9 0 0 0-5.63 4.08 5.86 5.86 0 0 0-3.92 2.84 5.9 5.9 0 0 0 .73 6.9 5.86 5.86 0 0 0 .5 4.82 5.9 5.9 0 0 0 6.37 2.83A5.86 5.86 0 0 0 13 24a5.9 5.9 0 0 0 5.63-4.08 5.86 5.86 0 0 0 3.92-2.84 5.9 5.9 0 0 0-.73-6.9z" fill="currentColor" opacity=".7"/></svg>
              </div>
              <div class="provider-row-info">
                <h4>OpenAI <span id="openai-status" class="provider-badge">Not configured</span></h4>
                <p>GPT-4o, GPT-4o-mini, o1 — an all-rounder for chat, coding, and everyday tasks</p>
              </div>
            </div>
            <div class="provider-row-expand" onclick="event.stopPropagation()">
              <form class="api-key-form" data-provider="openai">
                <div class="provider-key-row">
                  <input type="password" class="api-key-input" placeholder="sk-proj-..." autocomplete="off">
                  <button type="button" class="btn btn-sm toggle-visibility">Show</button>
                  <button type="submit" class="btn btn-sm btn-primary">Save</button>
                  <button type="button" class="btn btn-sm btn-danger api-key-delete" style="display:none">Remove</button>
                </div>
                <div class="api-key-msg"></div>
              </form>
              <p class="provider-key-help">Get your key at <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com/api-keys</a></p>
            </div>
          </div>

          <!-- Anthropic -->
          <div class="provider-row" onclick="this.classList.toggle('expanded')">
            <div class="provider-row-main">
              <div class="provider-row-icon">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M16.5 3h-2.4L8.4 21h2.4l1.4-4.5h5.6L19.2 21h2.4L16.5 3zm-3.5 11.5L15 8l2 6.5h-4zM7.8 3H5.4L0 21h2.4l1.4-4.5H8l.6 1.8h2.5L7.8 3z" fill="currentColor" opacity=".7"/></svg>
              </div>
              <div class="provider-row-info">
                <h4>Anthropic <span id="anthropic-status" class="provider-badge">Not configured</span></h4>
                <p>Claude Sonnet, Haiku, Opus — excellent for reasoning, analysis and long context</p>
              </div>
            </div>
            <div class="provider-row-expand" onclick="event.stopPropagation()">
              <form class="api-key-form" data-provider="anthropic">
                <div class="provider-key-row">
                  <input type="password" class="api-key-input" placeholder="sk-ant-..." autocomplete="off">
                  <button type="button" class="btn btn-sm toggle-visibility">Show</button>
                  <button type="submit" class="btn btn-sm btn-primary">Save</button>
                  <button type="button" class="btn btn-sm btn-danger api-key-delete" style="display:none">Remove</button>
                </div>
                <div class="api-key-msg"></div>
              </form>
              <p class="provider-key-help">Get your key at <a href="https://console.anthropic.com/settings/keys" target="_blank">console.anthropic.com/settings/keys</a></p>
            </div>
          </div>

          <!-- Google Gemini -->
          <div class="provider-row" onclick="this.classList.toggle('expanded')">
            <div class="provider-row-main">
              <div class="provider-row-icon">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M12 0L8.59 8.59 0 12l8.59 3.41L12 24l3.41-8.59L24 12l-8.59-3.41L12 0z" fill="#4285F4"/><path d="M12 0L8.59 8.59 0 12l8.59 3.41L12 24" fill="#34A853"/><path d="M12 24l3.41-8.59L24 12l-8.59-3.41" fill="#EA4335"/><path d="M12 0l3.41 8.59L24 12" fill="#FBBC05"/></svg>
              </div>
              <div class="provider-row-info">
                <h4>Google Gemini <span id="google-status" class="provider-badge">Not configured</span></h4>
                <p>Gemini 2.0 Flash, 1.5 Pro — strong with images, documents and large context</p>
              </div>
            </div>
            <div class="provider-row-expand" onclick="event.stopPropagation()">
              <form class="api-key-form" data-provider="google">
                <div class="provider-key-row">
                  <input type="password" class="api-key-input" placeholder="AIza..." autocomplete="off">
                  <button type="button" class="btn btn-sm toggle-visibility">Show</button>
                  <button type="submit" class="btn btn-sm btn-primary">Save</button>
                  <button type="button" class="btn btn-sm btn-danger api-key-delete" style="display:none">Remove</button>
                </div>
                <div class="api-key-msg"></div>
              </form>
              <p class="provider-key-help">Get your key at <a href="https://aistudio.google.com/app/apikey" target="_blank">aistudio.google.com/app/apikey</a></p>
            </div>
          </div>

          <!-- Grok (xAI) -->
          <div class="provider-row" onclick="this.classList.toggle('expanded')">
            <div class="provider-row-main">
              <div class="provider-row-icon">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M4 4l16 16M4 20L20 4" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" opacity=".7"/></svg>
              </div>
              <div class="provider-row-info">
                <h4>Grok (xAI) <span id="grok-status" class="provider-badge">Not configured</span></h4>
                <p>Grok 3, Grok 3 Mini — powerful reasoning and real-time knowledge from xAI</p>
              </div>
            </div>
            <div class="provider-row-expand" onclick="event.stopPropagation()">
              <form class="api-key-form" data-provider="grok">
                <div class="provider-key-row">
                  <input type="password" class="api-key-input" placeholder="xai-..." autocomplete="off">
                  <button type="button" class="btn btn-sm toggle-visibility">Show</button>
                  <button type="submit" class="btn btn-sm btn-primary">Save</button>
                  <button type="button" class="btn btn-sm btn-danger api-key-delete" style="display:none">Remove</button>
                </div>
                <div class="api-key-msg"></div>
              </form>
              <p class="provider-key-help">Get your key at <a href="https://console.x.ai" target="_blank">console.x.ai</a></p>
            </div>
          </div>


        </div>

        <div style="margin-top:1.5rem">
          <h2>Stored Keys</h2>
          <div id="stored-keys-list"></div>
        </div>

        <div style="margin-top:2rem" id="integration-config-section">
          <h2>Integration OAuth Setup</h2>
          <p class="help-text">
            Configure OAuth credentials so users can connect their GitHub and Google Drive accounts.
            Create an OAuth App on each platform and paste the credentials below. <strong>Admin only.</strong>
          </p>

          <div class="card" style="margin-bottom:1rem">
            <h3 style="margin-bottom:0.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:4px"><path fill="currentColor" d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/></svg>
              GitHub OAuth
            </h3>
            <p class="help-text" style="margin:0 0 0.5rem">Create at <a href="https://github.com/settings/developers" target="_blank">github.com/settings/developers</a> → OAuth Apps. Callback URL: <code id="gh-callback-url"></code></p>
            <div class="field" style="margin-bottom:0.4rem">
              <label>Client ID</label>
              <input type="text" id="int-gh-client-id" placeholder="Ov23li..." autocomplete="off">
            </div>
            <div class="field" style="margin-bottom:0.4rem">
              <label>Client Secret</label>
              <input type="password" id="int-gh-client-secret" placeholder="GitHub client secret" autocomplete="off">
            </div>
            <button class="btn btn-sm btn-primary" id="save-gh-config">Save GitHub Config</button>
            <span id="gh-config-msg" class="api-key-msg" style="margin-left:0.5rem"></span>
          </div>

          <div class="card" style="margin-bottom:1rem">
            <h3 style="margin-bottom:0.5rem">
              <svg width="18" height="18" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:4px"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
              Google Drive OAuth
            </h3>
            <p class="help-text" style="margin:0 0 0.5rem">Create at <a href="https://console.cloud.google.com/apis/credentials" target="_blank">Google Cloud Console</a> → OAuth 2.0 Client IDs. Redirect URI: <code id="gd-callback-url"></code></p>
            <div class="field" style="margin-bottom:0.4rem">
              <label>Client ID</label>
              <input type="text" id="int-gd-client-id" placeholder="584029050721-xxx.apps.googleusercontent.com" autocomplete="off">
            </div>
            <div class="field" style="margin-bottom:0.4rem">
              <label>Client Secret</label>
              <input type="password" id="int-gd-client-secret" placeholder="Google Drive client secret" autocomplete="off">
            </div>
            <button class="btn btn-sm btn-primary" id="save-gd-config">Save Google Drive Config</button>
            <span id="gd-config-msg" class="api-key-msg" style="margin-left:0.5rem"></span>
          </div>

          <div class="card" style="margin-bottom:1rem">
            <h3 style="margin-bottom:0.5rem">▲ Vercel OAuth</h3>
            <p class="help-text" style="margin:0 0 0.5rem">Create at <a href="https://vercel.com/account/tokens" target="_blank">vercel.com/account/tokens</a> or set up an <a href="https://vercel.com/docs/integrations" target="_blank">OAuth Integration</a>. Callback URL: <code id="vc-callback-url"></code></p>
            <div class="field" style="margin-bottom:0.4rem">
              <label>Client ID</label>
              <input type="text" id="int-vc-client-id" placeholder="Vercel client ID" autocomplete="off">
            </div>
            <div class="field" style="margin-bottom:0.4rem">
              <label>Client Secret</label>
              <input type="password" id="int-vc-client-secret" placeholder="Vercel client secret" autocomplete="off">
            </div>
            <button class="btn btn-sm btn-primary" id="save-vc-config">Save Vercel Config</button>
            <span id="vc-config-msg" class="api-key-msg" style="margin-left:0.5rem"></span>
          </div>

          <div class="card" style="margin-bottom:1rem">
            <h3 style="margin-bottom:0.5rem">◆ Netlify OAuth</h3>
            <p class="help-text" style="margin:0 0 0.5rem">Create at <a href="https://app.netlify.com/user/applications" target="_blank">app.netlify.com/user/applications</a> → OAuth Applications. Callback URL: <code id="nt-callback-url"></code></p>
            <div class="field" style="margin-bottom:0.4rem">
              <label>Client ID</label>
              <input type="text" id="int-nt-client-id" placeholder="Netlify client ID" autocomplete="off">
            </div>
            <div class="field" style="margin-bottom:0.4rem">
              <label>Client Secret</label>
              <input type="password" id="int-nt-client-secret" placeholder="Netlify client secret" autocomplete="off">
            </div>
            <button class="btn btn-sm btn-primary" id="save-nt-config">Save Netlify Config</button>
            <span id="nt-config-msg" class="api-key-msg" style="margin-left:0.5rem"></span>
          </div>

          <div class="card">
            <h3 style="margin-bottom:0.5rem">🐳 Docker</h3>
            <p class="help-text" style="margin:0 0 0.5rem">Docker Engine API host. Default: <code>http://localhost:2375</code>. Enable the Docker API via <code>dockerd -H tcp://0.0.0.0:2375</code> or use your remote Docker host URL.</p>
            <div class="field" style="margin-bottom:0.4rem">
              <label>Docker Host URL</label>
              <input type="text" id="int-docker-host" placeholder="http://localhost:2375" autocomplete="off">
            </div>
            <button class="btn btn-sm btn-primary" id="save-docker-config">Save Docker Config</button>
            <span id="docker-config-msg" class="api-key-msg" style="margin-left:0.5rem"></span>
          </div>
        </div>
      </div>

      <!-- Event Log -->
      <div id="event-log" class="event-log">
        <h4>Live Events</h4>
        <div id="events"></div>
      </div>
    </div>
  </div>

  <script>
    // Set this to the Railway backend URL for Netlify deployment (WebSocket can't be proxied by Netlify)
    // When running locally or on Railway directly, leave empty to use same-origin.
    window.BACKEND_URL = window.location.hostname.includes('netlify.app')
      ? 'https://claw-staffer-production.up.railway.app'
      : '';
  </script>
  <script src="/assets/system-prompts.js"></script>
  <script src="/assets/app.js?v=18"></script>
</body>
</html>
